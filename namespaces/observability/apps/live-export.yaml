apiVersion: v1
items:
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: '18'
      kubectl.kubernetes.io/last-applied-configuration: '{"apiVersion":"apps/v1","kind":"DaemonSet","metadata":{"annotations":{},"name":"alloy","namespace":"observability"},"spec":{"selector":{"matchLabels":{"app":"alloy"}},"template":{"metadata":{"labels":{"app":"alloy"}},"spec":{"containers":[{"args":["run","/etc/alloy/alloy-config.yaml"],"image":"grafana/alloy:latest","name":"alloy","volumeMounts":[{"mountPath":"/etc/alloy","name":"config"}]}],"serviceAccountName":"alloy","volumes":[{"configMap":{"name":"alloy-config"},"name":"config"}]}}}}

        '
    creationTimestamp: '2026-02-04T13:32:15Z'
    generation: 18
    name: alloy
    namespace: observability
    resourceVersion: '241342'
    uid: d5264343-a7a2-432c-a3a3-6f7698d9fc26
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: alloy
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/restartedAt: '2026-02-06T04:44:12Z'
        labels:
          app: alloy
      spec:
        containers:
        - args:
          - run
          - /etc/alloy/alloy-config.yaml
          image: grafana/alloy:latest
          imagePullPolicy: Always
          name: alloy
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/alloy
            name: config
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: alloy
        serviceAccountName: alloy
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: alloy-config
          name: config
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 5
    desiredNumberScheduled: 5
    numberAvailable: 5
    numberMisscheduled: 0
    numberReady: 5
    observedGeneration: 18
    updatedNumberScheduled: 5
- apiVersion: v1
  data:
    alloy-config.yaml: "discovery.kubernetes \"pods\" {\n  role = \"pod\"\n}\n\nloki.relabel\
      \ \"add_cluster\" {\n  rule {\n    action        = \"replace\"\n    target_label\
      \  = \"cluster\"\n    replacement   = \"homelab\"\n  }\n\n  forward_to = [loki.write.loki.receiver]\n\
      }\n\nloki.source.kubernetes \"pods\" {\n  targets    = discovery.kubernetes.pods.targets\n\
      \  forward_to = [loki.relabel.add_cluster.receiver]\n}\n\nloki.write \"loki\"\
      \ {\n  endpoint {\n    url = \"http://loki.monitoring.svc.cluster.local:3100/loki/api/v1/push\"\
      \n  }\n}\n"
  kind: ConfigMap
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: '{"apiVersion":"v1","data":{"alloy-config.yaml":"discovery.kubernetes
        \"pods\" {\n  role = \"pod\"\n}\n\nloki.relabel \"add_cluster\" {\n  rule
        {\n    action        = \"replace\"\n    target_label  = \"cluster\"\n    replacement   =
        \"homelab\"\n  }\n\n  forward_to = [loki.write.loki.receiver]\n}\n\nloki.source.kubernetes
        \"pods\" {\n  targets    = discovery.kubernetes.pods.targets\n  forward_to
        = [loki.relabel.add_cluster.receiver]\n}\n\nloki.write \"loki\" {\n  endpoint
        {\n    url = \"http://loki.monitoring.svc.cluster.local:3100/loki/api/v1/push\"\n  }\n}\n"},"kind":"ConfigMap","metadata":{"annotations":{},"name":"alloy-config","namespace":"observability"}}

        '
    creationTimestamp: '2026-02-05T02:53:18Z'
    name: alloy-config
    namespace: observability
    resourceVersion: '97393'
    uid: ee6082bb-a052-4e4e-ba8d-5427b706f63f
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: '{"apiVersion":"v1","kind":"ServiceAccount","metadata":{"annotations":{},"name":"alloy","namespace":"observability"}}

        '
    creationTimestamp: '2026-02-04T13:32:15Z'
    name: alloy
    namespace: observability
    resourceVersion: '20609'
    uid: fec0f793-cee6-422a-be0c-af8e611db76c
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: '{"apiVersion":"v1","kind":"ServiceAccount","metadata":{"annotations":{},"name":"alloy-log-reader","namespace":"observability"}}

        '
    creationTimestamp: '2026-02-05T03:27:17Z'
    name: alloy-log-reader
    namespace: observability
    resourceVersion: '48844'
    uid: bf5d3040-05e9-4436-826f-ee8dc320cc60
